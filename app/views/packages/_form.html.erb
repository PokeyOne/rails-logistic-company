<%= form_with model: package do |form| %>
  <div>
    <%= form.label :name %><br/>
    <%= form.text_field :name %>
  </div>

  <% if package.errors.any? %>
    <div>
      <% package.errors.full_messages.each do |msg| %>
        <p style="color: red;"><%= msg %></p>
      <% end %>
    </div>
  <% end %>

  <div>
    <b>Destination Address</b><br/>
    <%= form.fields_for :to_address do |sub_form| %>
      <% render "address_form", form: sub_form, address: package&.to_address %>
    <% end %>
  </div>

  <div>
    <b>Origin Address</b><br/>
    <%= form.fields_for :from_address do |sub_form| %>
      <% render "address_form", form: sub_form, address: package&.from_address %>
    <% end %>
  </div>

  <div>
    <b>State</b>
    <%= form.select :state, Package::STATES %>
  </div>

  <div>
    <%= form.submit %>
  </div>
<% end %>
